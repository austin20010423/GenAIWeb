<!DOCTYPE html>
<html>
  <head>
    <title>TextToSticker</title>
    <link rel="stylesheet" type="text/css" href="static/styles.css" />
    <link
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <meta name="description" content="Text to Image 文字一鍵變身貼圖" />
  <body>
    <header>
      <h1>TextToSticker - 文字一鍵變身貼圖</h1>
    </header>

    <div class="switch">
      <span>設計選擇</span>
      <button id="switchButton" onclick="changeText()">標準</button>
    </div>

    <div class="container">
      <div class="left-panel">
        <form action="/" method="post">
          <div class="option-group">
            <div class="option">
              <label>主角</label>
              <select name="characters">
                <option value="無">無</option>
                <option value="小老鼠">小老鼠</option>
                <option value="老虎">老虎</option>
                <option value="兔子">兔子</option>
                <option value="乳牛">乳牛</option>
                <option value="蛇">蛇</option>
                <option value="龍">龍</option>
                <option value="馬">馬</option>
                <option value="羊">羊</option>
                <option value="猴子">猴子</option>
                <option value="雞">雞</option>
                <option value="狗狗">狗狗</option>
                <option value="小鳥">小鳥</option>
                <option value="海豚">海豚</option>
                <option value="松鼠">松鼠</option>
                <option value="貓加狗">貓加狗</option>
                <option value="雞加狗">雞加狗</option>
                <option value="狗, 松鼠">狗加松鼠</option>
                <option value="老鼠加牛">老鼠加牛</option>
              </select>
              <input
                id="extend"
                name="character_input"
                type="text"
                placeholder="輸入更多主角敘述"
              />
            </div>
            <div class="option">
              <label>表情</label>
              <select name="faces">
                <option value="無">無</option>
                <option value="開心">開心</option>
                <option value="笑到哭">笑到哭</option>
                <option value="微笑">微笑</option>
                <option value="戀愛中">戀愛中</option>
                <option value="酷炫">酷炫</option>
                <option value="天使">天使</option>
                <option value="調皮">調皮</option>
                <option value="不爽">不爽</option>
                <option value="生氣">生氣</option>
                <option value="睡覺">睡覺</option>
              </select>
              <input
                id="extend"
                name="face_input"
                type="text"
                placeholder="輸入更多表情敘述"
              />
            </div>
          </div>
          <div class="option-group">
            <div class="option">
              <label>動作</label>
              <select name="action">
                <option value="無">無</option>
                <option value="走路">走路</option>
                <option value="跑步">跑步</option>
                <option value="跳舞">跳舞</option>
                <option value="游泳">游泳</option>
                <option value="打籃球">打籃球</option>
                <option value="唱歌">唱歌</option>
                <option value="跳躍">跳躍</option>
                <option value="睡覺">睡覺</option>
                <option value="吃飯">吃飯</option>
                <option value="寫字">寫字</option>
              </select>
              <input
                id="extend"
                name="action_input"
                type="text"
                placeholder="輸入更多動作敘述"
              />
            </div>
            <div class="option">
              <label>背景</label>
              <select name="background">
                <option value="無">無</option>
                <option value="山脉">山脈</option>
                <option value="海洋">海洋</option>
                <option value="森林">森林</option>
                <option value="沙漠">沙漠</option>
                <option value="湖泊">湖泊</option>
                <option value="城市">城市</option>
                <option value="田野">田野</option>
                <option value="雪山">雪山</option>
                <option value="星空">星空</option>
                <option value="草原">草原</option>
                <option value="校園">校園</option>
                <option value="醫院">醫院</option>
                <option value="棒球場">棒球場</option>
                <option value="籃球場">籃球場</option>
                <option value="公園">公園</option>
                <option value="遊樂場">遊樂場</option>
                <option value="綠洲">綠洲</option>
              </select>
              <input
                id="extend"
                name="background_input"
                type="text"
                placeholder="輸入更多背景敘述"
              />
            </div>
          </div>
          <div class="option-group">
            <div class="option">
              <label>風格</label>
              <select name="style">
                <option value="無">無</option>
                <option value="卡通">卡通</option>
                <option value="寫實">寫實</option>
                <option value="油畫">油畫</option>
                <option value="公仔">公仔</option>
                <option value="抽像">抽象</option>
              </select>
              <input
                id="extend"
                name="style_input"
                type="text"
                placeholder="輸入更多風格敘述"
              />
            </div>
            <div class="option">
              <label>服裝</label>
              <select name="clothes">
                <option value="無">無</option>
                <option value="廚師">廚師</option>
                <option value="西裝">西裝</option>
                <option value="洋裝">洋裝</option>
                <option value="學生">學生</option>
                <option value="棒球服">棒球服</option>
              </select>
              <input
                id="extend"
                name="clothes_input"
                type="text"
                placeholder="輸入更多服裝敘述"
              />
            </div>
          </div>

          <div class="option-group">
            <div class="option">
              <label>讓圖片說點什麼吧</label>
              <select name="say_something">
                <option value="無">無</option>
                <option value="早安">早安</option>
                <option value="你好">你好</option>
                <option value="謝謝你">謝謝你</option>
                <option value="晚安">晚安</option>
                <option value="對不起">對不起</option>
                <option value="歡迎">歡迎</option>
                <option value="生日快樂">生日快樂</option>
                <option value="讚">讚</option>
                <option value="恭喜">恭喜</option>
                <option value="加油">加油</option>
                <option value="哈哈哈">哈哈哈</option>
                <option value="+1">+1</option>
                <option value="端午節快樂">端午節快樂</option>
                <option value="Love">Love</option>
              </select>
              <input
                id="extend"
                name="word_on_picture"
                type="text"
                placeholder="讓圖片說點什麼吧"
              />
            </div>

            <div class="option">
              <label>樣貌</label>
              <select name="look">
                <option value="無">無</option>
                <option value="可愛">可愛</option>
              </select>
              <input
                id="extend"
                name="look_input"
                type="text"
                placeholder="輸入更多樣式的敘述"
              />
            </div>
          </div>

          <div class="submit">
            <input type="submit" value="生成圖片" />
          </div>
        </form>
      </div>
      <div class="right-panel">
        <div class="image-container">
          <h2>Input Text</h2>
          <p>{{ text_input }}</p>

          <h2>Generated Image</h2>
          <!-- Display the generated images and download buttons -->
          <div>
            <!-- First group of images and download buttons -->
            <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">
              <!-- First Image 1 -->
              <div style="text-align: center;">
                <img src="data:image/png;base64,{{ base64_encoded_image_1 }}" alt="Image 1" style="margin-bottom: 5px; width: 200px;">
                <a href="data:image/png;base64,{{ base64_encoded_image_1 }}" download="image_1.png">
                  <button>Download Image 1</button>
                </a>
              </div>
              
              <!-- First Image 2 -->
              <div style="text-align: center;">
                <img src="data:image/png;base64,{{ base64_encoded_image_2 }}" alt="Image 2" style="margin-bottom: 5px; width: 200px;">
                <a href="data:image/png;base64,{{ base64_encoded_image_2 }}" download="image_2.png">
                  <button>Download Image 2</button>
                </a>
              </div>
            </div>
          
            <!-- Second group of images and download buttons -->
            <div style="display: flex; justify-content: space-between;">
              <!-- Second Image 3 -->
              <div style="text-align: center;">
                <img src="data:image/png;base64,{{ base64_encoded_image_3 }}" alt="Image 3" style="margin-bottom: 5px; width: 200px;">
                <a href="data:image/png;base64,{{ base64_encoded_image_3 }}" download="image_3.png">
                  <button>Download Image 3</button>
                </a>
              </div>
          
              <!-- Second Image 4 -->
              <div style="text-align: center;">
                <img src="data:image/png;base64,{{ base64_encoded_image_4 }}" alt="Image 4" style="margin-bottom: 5px; width: 200px;">
                <a href="data:image/png;base64,{{ base64_encoded_image_4 }}" download="image_4.png">
                  <button>Download Image 4</button>
                </a>
              </div>
            </div>
          </div>
          
          
          

          </div>
        </div>
      </div>
    </div>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
      var button = document.getElementById("switchButton");
      var inputs = document.querySelectorAll("input[id='extend']");
      var buttonState = localStorage.getItem("buttonState") === "true";

      updateButton();

      button.onclick = function () {
        buttonState = !buttonState;
        localStorage.setItem("buttonState", buttonState);
        updateButton();
      };

      function updateButton() {
        if (buttonState) {
          button.innerHTML = "簡約";
          for (var i = 0; i < inputs.length; i++) {
            inputs[i].style.display = "none";
          }
        } else {
          button.innerHTML = "標準";
          for (var i = 0; i < inputs.length; i++) {
            inputs[i].style.display = "block";
          }
        }
      }

      function downloadImages() {
        // Create a new ZIP archive
        var zip = new JSZip();

        // Add each image to the ZIP archive
        zip.file("image1.png", "{{ base64_encoded_image_1 }}", {
          base64: true,
        });
        zip.file("image2.png", "{{ base64_encoded_image_2 }}", {
          base64: true,
        });
        zip.file("image3.png", "{{ base64_encoded_image_3 }}", {
          base64: true,
        });
        zip.file("image4.png", "{{ base64_encoded_image_4 }}", {
          base64: true,
        });

        // Generate the ZIP file content
        zip.generateAsync({ type: "blob" }).then(function (content) {
          // Create a download link for the ZIP file
          var downloadLink = document.createElement("a");
          downloadLink.download = "images.zip";
          downloadLink.href = URL.createObjectURL(content);

          // Append the download link to the document body
          document.body.appendChild(downloadLink);

          // Trigger the download
          downloadLink.click();

          // Remove the download link from the document body
          document.body.removeChild(downloadLink);
        });
      }
    </script>
  </body>
</html>
